# Компонентная архитектура

## Обоснование выбора архитектурного стиля

Микросервисная архитектура является эффективным подходом для разработки приложений, которые должны масштабироваться и быть гибкими в изменении. В случае приложения для анализа объектов БД, микросервисная архитектура может предоставить следующие преимущества:

- Гибкость: Микросервисы могут быть разработаны и развернуты независимо друг от друга, что позволяет быстро вносить изменения в приложение без необходимости перезапуска всего приложения.

- Масштабируемость: Микросервисы могут быть масштабированы отдельно друг от друга, что позволяет легко управлять нагрузкой на приложение и обеспечивать высокую доступность.

- Устойчивость: Если один из микросервисов не работает, остальные микросервисы могут продолжать работу, что обеспечивает устойчивость приложения в целом.

- Легкость разработки: Разработчики могут работать над отдельными микросервисами, что упрощает процесс разработки и тестирования.

- Легкость внедрения новых функций: Новые функции могут быть добавлены в виде новых микросервисов, что позволяет быстро внедрять новые возможности в приложение.

## Диаграммы компонентов

На диаграмме представлены компоненты микросервисной архитектуры системы и интеграции между данными компонентами.

### Общая структура системы

![Общая](diagrams/src/Rus.drawio)

### Описание компонентов

| № п/п | Тип             | Наименование                                                               | Технологии     | Описание                                                                                                    |
| ----- | --------------- | -------------------------------------------------------------------------- | -------------- | ----------------------------------------------------------------------------------------------------------- |
| 1     | Person          | Руководитель                                                               |                | Пользователь из числа руководства                                                                           |
| 2     | Person          | Разработчик                                                                |                | Пользователь из числа разработчиков                                                                         |
| 3     | Person          | Администратор                                                              |                | Пользователь из числа администраторов                                                                       |
| 4     | Person          | Тестировщик                                                                |                | Пользователь из числа тестировщиков                                                                         |
| 5     | Container       | UI SCCSD                                                                   | Web            | Единая форма работы. Позволяет вызвать данные с сервисов                                                    |
| 6     | Software system | API GATEWAY                                                                |                | Шлюз взаимодействия сервисов                                                                                |
| 7     | Container       | RabbitMQ                                                                   |                | Система взаимодействия сервисов для передачи данных                                                         |
| 8     | Container       | БД (цель миграции)                                                         | PostgreSQL     | БД для хранения объектов, прошедших миграцию из БД Oracle                                                   |
| 9     | Container       | БД (источник миграции)                                                     | Oracle         | БД для хранение объектов, которые необходимо перенести в БД PostgreSQL                                      |
| 10    | External system | Mail service                                                               |                | Почтовый сервис для отправки сообщений                                                                      |
| 11    | External system | JIRA                                                                       |                | Система управления проектами и задачами                                                                     |
| 12    | External system | Subversion                                                                 |                | Система контроля версий                                                                                     |
| 13    | External system | FTP Server                                                                 |                | FTP для хранения собранных артефактов                                                                       |

### Стуктура сервиса расчёта статистики по процессу миграции

![Сергей](diagrams/src/Rus.drawio)

### Описание компонентов

| № п/п | Тип             | Наименование                                                               | Технологии     | Описание                                                                                                    |
| ----- | --------------- | -------------------------------------------------------------------------- | -------------- | ----------------------------------------------------------------------------------------------------------- |
| 1     | Container       | Report Service                                                             | Spring Service | Осуществляет формирвоание отчетов по процессу миграции                                                      |
| 2     | Container       | Calculation Service                                                        | Spring Service | Осуществляет расчет статистики процесса миграции                                                            |
| 3     | Container       | БД списка проектов и модулей                                               | Oracle         | Хранение данных по проектам, модулям и функциональным частям                                                |
| 4     | Container       | Кэш списка проектов и модулей                                              | In-memory cache| Кэш списка проектов, модулей и функциональных частей для быстрого чтения                                    |
| 5     | Container       | БД данных расчёта                                                          | Oracle         | Хранение данных расчёта статистики по артефактам и объектам БД                                              |
| 6     | External system | API Gateway                                                                |                | Шлюз взаимодействия сервисов                                                                                |
| 7     | External system | JIRA                                                                       |                | Система управления проектами и задачами                                                                     |
| 8     | External system | RabbitMQ                                                                   |                | Система взаимодействия сервисов для передачи данных                                                         |
| 9     | External system | Mail service                                                               |                | Почтовый сервис для отправки сообщений                                                                      |

### Стуктура сервиса получения данных по процессу миграции объектов БД

![Александр](diagrams/src/Rus.drawio)

### Описание компонентов

| № п/п | Тип             | Наименование                                                               | Технологии     | Описание                                                                                                    |
| ----- | --------------- | -------------------------------------------------------------------------- | -------------- | ----------------------------------------------------------------------------------------------------------- |
| 1     | Container       | Компонент работы с базами данных                                           | Spring Service | Работа пользователей по осуществелнию миграции объектов БД                                                  |
| 2     | Container       | БД Источник                                                                | PostgreSQL     | Хранение данных по объектам БД и процессу миграции                                                          |
| 3     | Container       | БД Миграции                                                                | PostgreSQL     | Хранение данных по новым объектам БД в процессе миграции                                                    |
| 4     | Container       | Компонент-хранилище информации о проектах, модулях и пользователях         | Spring Service | Управление списком проектов и модулей, а также привязка пользователей к модулям, за которые они отвечают    |
| 5     | Container       | БД Списка модулей и пользователей                                          | PostgreSQL     | Хранение данных списка проектов, модулей и привязанных пользоватеней к модулю                               |
| 6     | Container       | Компонент расчёта данных                                                   | Spring Service | Расчёт статистических данных объектов БД в разрезе проектов и модулей                                       |
| 7     | Container       | БД списка модулей и расчётов                                               | PostgreSQL     | Хранение результатов расчёта статистики объектов БД с использованным списком проектов и модулей             |
| 8     | External system | API Gateway                                                                |                | Шлюз взаимодействия сервисов                                                                                |
| 9     | External system | JIRA                                                                       |                | Система управления проектами и задачами                                                                     |
| 10    | External system | RabbitMQ                                                                   |                | Система взаимодействия сервисом для передачи данных                                                         |

### Стуктура сервиса получения данных по процессу миграции Jar

![Руслан](diagrams/src/Rus.drawio)

### Описание компонентов

| № п/п | Тип             | Наименование                                                               | Технологии     | Описание                                                                                                    |
| ----- | --------------- | -------------------------------------------------------------------------- | -------------- | ----------------------------------------------------------------------------------------------------------- |
| 1     | Container       | Artifacts info service                                                     | Spring Service | Осуществляет CRUD модулей, артефактов. Хранит актуальную инф-ию о файлах и модулях                          |
| 2     | Container       | Calculation Service                                                        | Spring Service | Осуществляет расчет статистики процесса миграции                                                            |
| 3     | Container       | БД списка проектов и модулей                                               | Oracle         | Хранение данных по проектам, модулям и функциональным частям                                                |
| 4     | Container       | Кэш списка проектов и модулей                                              | In-memory cache| Кэш списка проектов, модулей и функциональных частей для быстрого чтения                                    |
| 5     | Container       | БД данных расчёта                                                          | Oracle         | Хранение данных по расчёту статистики артефактов                                                            |
| 6     | System Software | Jenkins                                                                    |                | Сборщик артефактов                                                                                          |
| 7     | External system | API Gateway                                                                |                | Шлюз взаимодействия сервисов                                                                                |
| 8     | External system | Subversion                                                                 |                | Система контроля версий                                                                                     |
| 9     | External system | FTP Server                                                                 |                | FTP для хранения собранных артефактов                                                                       |